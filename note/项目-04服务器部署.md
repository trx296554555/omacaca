# 服务器部署

---

## 1. 服务器
- 购买腾讯云的轻量服务器，配置如下： 双核，4G，10M
- 用小明的黑人服务器也行
- 完成基础配置，更新完毕，安装完毕，重启完毕
- 下载宝塔面板，安装
- 腾讯云安全组设置，开放端口
- 
## 2. 软件安装配置
### git配置
- 安装git
- git config --global user.name "trx-txserver"
- git config --global user.email "296554555@qq.com"
- ssh-keygen -t rsa -C "296554555@qq.com" #不要设置密码傻了吧唧的
- cat ~/.ssh/id_rsa.pub
- 复制公钥到github
- ssh-agent bash
- ssh-add ~/.ssh/id_rsa

### nodejs配置
- 安装nodejs
  - cd /usr/local/nodejs
  - wget https://nodejs.org/dist/v18.12.1/node-v18.12.1-linux-x64.tar.xz
  - tar xvf node-v18.12.1-linux-x64.tar.xz node-v18.12.1-linux-x64/
  - .bashrc 配置
    - export NODE_HOME=/usr/local/nodejs/node-v18.12.1-linux-x64
    - export PATH=$NODE_HOME/bin:$PATH
    - source .bashrc
  - ```bash
    mkdir node_global
    mkdir node_cache
    npm config set prefix "node_global"
    npm config set cache "node_cache"
    ```
- npm install -g cnpm --registry=https://registry.npm.taobao.org
- npm config set registry https://registry.npm.taobao.org

## github 获取代码
### 静态 vue
- cd /www/wwwroot/omacaca2.0
- git clone git@github.com:trx296554555/omacaca.git
- git pull
- cd omacaca
- npm install
- npm run build

### 网站配置
- 使用宝塔面板，创建网站，选择静态网站，选择目录，保存
- 配置域名
- 配置https
- 设置webhook，自动部署

